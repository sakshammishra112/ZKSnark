# ZK SNARK Circuit Implementation
In this project we will create a circuit using circom programming language and later deploy a solidity verifier on Cordana polygon test network.


## Description

The Assessment Solidity Smart Contract serves as the backbone of a decentralized application (dApp) that allows users to interact with Ethereum blockchain features. It includes the following key functionalities:

* A correct circuit.circom implementation
* Compile the circuit to generate circuit intermediaries
* Generate a proof using inputs A=0 B=1
* Deploy a solidity verifier to Cortona Testnet
* Call the verifyProof() method on the verifier contract and assert output is true

## Getting Started

### Installing

To use this project, you need to have a set up the project on your git pod account. You can download the code directly or clone the repository:
```
git clone https://github.com/PreetJawla/zkENV/tree/main
```
### Executing program

### Circuit Diagram
![Circuit diagram image](https://authoring.metacrafters.io/assets/cms/Assessment_b05f6ed658.png?updated_at=2023-02-24T00:00:37.278Z)

## Quick Start
Compile the Multiplier2() circuit and verify it against a smart contract verifier

```
pragma circom 2.0.0;

/*This circuit template checks that c is the multiplication of a and b.*/  

template Multiplier2 () {  

   // Declaration of signals.  
   signal input a;  
   signal input b;  
   signal x;
   signal y;
   signal output q;  


   component andGate = AND();
   component notGate = NOT();
   component orGate = OR();

   andGate.a <== a;
   andGate.b <== b;
   x <== andGate.out;

   notGate.in <== b;
   y <== notGate.out;

   orGate.a <== x;
   orGate.b <== y;
   
   q <== orGate.out;
  
}

template AND() {
    signal input a;
    signal input b;
    signal output out;

    out <== a*b;
}

template OR() {
    signal input a;
    signal input b;
    signal output out;

    out <== a + b - a*b;
}

template NOT() {
    signal input in;
    signal output out;

    out <== 1 + in - 2*in;
}

component main = Multiplier2();
```
### Install
`npm i`

### Compile
`npx hardhat circom` 
This will generate the **out** file with circuit intermediaries and geneate the **MultiplierVerifier.sol** contract

### Prove and Deploy
`npx hardhat run scripts/deploy.ts --network cardona`This script does 4 things  
1. Deploys the MultiplierVerifier.sol contract
2. Generates a proof from circuit intermediaries with `generateProof()`
3. Generates calldata with `generateCallData()`
4. Calls `verifyProof()` on the verifier contract with calldata
5. Deploy the smart contract on cortana polygon testnet

With two commands you can compile a ZKP, generate a proof, deploy a verifier, and verify the proof ðŸŽ‰

## hardhat.config.ts
```
  circom: {
    // (optional) Base path for input files, defaults to `./circuits/`
    inputBasePath: "./circuits",
    // (required) The final ptau file, relative to inputBasePath, from a Phase 1 ceremony
    ptau: "powersOfTau28_hez_final_12.ptau",
    // (required) Each object in this array refers to a separate circuit
    circuits: JSON.parse(JSON.stringify(circuits))
  },
  networks:{
    cardona:{
      url:process.env.POLYGON_ZKEVM_CARDONA_ALCHEMY_API_URL,
      accounts:[process.env.PRIVATE_KEY],
    }
  }
```
### circuits.config.json
circuits configuation is separated from hardhat.config.ts for **autogenerated** purposes (see next section)
```
[
  {
    "name": "CustomCircuit",
    "protocol": "groth16",
    "circuit": "CustomCircuit/circuit.circom",
    "input": "CustomCircuit/input.json",
    "wasm": "CustomCircuit/out/circuit.wasm",
    "zkey": "CustomCircuit/out/CustomCircuit.zkey",
    "vkey": "CustomCircuit/out/CustomCircuit.vkey",
    "r1cs": "CustomCircuit/out/CustomCircuit.r1cs",
    "beacon": "0102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f"
  }
]
```


## Help
If you encounter any issues or have questions about using the smart contract, please contact [preetjawla6@gmial.com].

## Authors

* Preet Jawla
* [preetjawla6@gmail.com]

## License

This project is licensed under the [preet] License - see the LICENSE.md file for details
